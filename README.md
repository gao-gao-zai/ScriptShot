# ScriptShot è„šæœ¬æˆªå±

<p align="center">
  <img src="https://img.shields.io/badge/Android-7.0+-brightgreen" alt="Android 7.0+">
  <img src="https://img.shields.io/badge/License-MIT-blue" alt="MIT License">
  <img src="https://img.shields.io/badge/Language-Java-orange" alt="Java">
</p>

**ScriptShot** æ˜¯ä¸€æ¬¾ Android æˆªå±è‡ªåŠ¨åŒ–å·¥å…·ï¼Œæ”¯æŒåœ¨æ¯æ¬¡æˆªå±åè‡ªåŠ¨æ‰§è¡Œ JavaScript è„šæœ¬ã€‚æ— è®ºæ˜¯æ—‹è½¬å›¾ç‰‡ã€æ·»åŠ æ°´å°ã€è‡ªåŠ¨åˆ†äº«ï¼Œè¿˜æ˜¯å…¶ä»–è‡ªå®šä¹‰å¤„ç†é€»è¾‘ï¼Œéƒ½å¯ä»¥é€šè¿‡ç®€å•çš„è„šæœ¬å®ç°ã€‚

---

## âœ¨ ä¸»è¦åŠŸèƒ½

- ğŸ“¸ **å¤šç§æˆªå±æ–¹å¼**ï¼šæ”¯æŒ Root æ¨¡å¼å’Œæ— éšœç¢æ¨¡å¼
- âš¡ **æˆªå±åè‡ªåŠ¨åŒ–**ï¼šæˆªå›¾å®Œæˆåè‡ªåŠ¨è¿è¡Œ JavaScript è„šæœ¬
- ğŸ–¼ï¸ **ä¸°å¯Œçš„å›¾åƒå¤„ç†**ï¼šæ—‹è½¬ã€è£å‰ªã€ç¼©æ”¾ã€æ°´å°ã€æ¨¡ç³Šç­‰
- ğŸ“ **å†…ç½®è„šæœ¬ç¼–è¾‘å™¨**ï¼šå¸¦è¯­æ³•é«˜äº®çš„ JS ç¼–è¾‘å™¨ï¼Œéšæ—¶ä¿®æ”¹è„šæœ¬
- ğŸš€ **å¿«æ·è§¦å‘**ï¼šæ”¯æŒæ¡Œé¢å¿«æ·æ–¹å¼å’Œå¿«æ·è®¾ç½®ç£è´´
- ğŸŒ **åŒè¯­æ”¯æŒ**ï¼šä¸­è‹±æ–‡ç•Œé¢

---

## ğŸ“± ç³»ç»Ÿè¦æ±‚

- Android 7.0 (API 24) åŠä»¥ä¸Š
- Root æ¨¡å¼éœ€è¦è®¾å¤‡å·²è·å– Root æƒé™
- æ— éšœç¢æ¨¡å¼éœ€è¦å¼€å¯æ— éšœç¢æœåŠ¡

---

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹

### 1. æˆäºˆæƒé™

æ‰“å¼€åº”ç”¨åï¼Œç‚¹å‡»ã€Œæˆäºˆåª’ä½“æƒé™ã€ä»¥å…è®¸è¯»å–æˆªå›¾ã€‚

### 2. é€‰æ‹©æˆªå±æ–¹å¼

| æ¨¡å¼ | è¯´æ˜ |
|------|------|
| **Root æ¨¡å¼** | é€šè¿‡ `su` å‘½ä»¤æ‰§è¡Œæˆªå±ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œéœ€è¦ Root æƒé™ |
| **æ— éšœç¢æ¨¡å¼** | é€šè¿‡ç³»ç»Ÿæ— éšœç¢ API æˆªå±ï¼Œæ— éœ€ Rootï¼Œé€‚åˆæ™®é€šç”¨æˆ· |

### 3. å¼€å¯è„šæœ¬è‡ªåŠ¨åŒ–ï¼ˆå¯é€‰ï¼‰

åœ¨è®¾ç½®é¡µé¢å¼€å¯ã€Œè„šæœ¬è‡ªåŠ¨åŒ–ã€å¼€å…³ï¼Œæ¯æ¬¡æˆªå±åå°†è‡ªåŠ¨è¿è¡Œé»˜è®¤è„šæœ¬ã€‚

### 4. è§¦å‘æˆªå±

- **æ¡Œé¢å¿«æ·æ–¹å¼**ï¼šç‚¹å‡»ã€Œåˆ›å»ºæˆªå±å¿«æ·æ–¹å¼ã€æ·»åŠ åˆ°æ¡Œé¢
- **å¿«æ·è®¾ç½®ç£è´´**ï¼šåœ¨é€šçŸ¥æ å¿«æ·è®¾ç½®ä¸­æ·»åŠ  ScriptShot ç£è´´
- **æµ‹è¯•æŒ‰é’®**ï¼šç‚¹å‡»ã€Œç«‹å³æµ‹è¯•æˆªå±ã€è¿›è¡Œæµ‹è¯•

---

## ğŸ“œ å†…ç½®è„šæœ¬

| è„šæœ¬å | åŠŸèƒ½ |
|--------|------|
| `æ—‹è½¬æˆªå±.js` | å°†æˆªå›¾æ—‹è½¬ 180Â°ï¼Œé€‚åˆå€’æ‹¿æ‰‹æœºæ—¶ä½¿ç”¨ |
| `å¿«æ·åˆ†äº«.js` | æˆªå›¾åè‡ªåŠ¨å¼¹å‡ºç³»ç»Ÿåˆ†äº«é¢æ¿ |
| `Default.js` | é»˜è®¤è„šæœ¬ï¼ˆç©ºæ“ä½œï¼‰ |

ä½ å¯ä»¥åœ¨ã€Œç®¡ç†è„šæœ¬ã€é¡µé¢ç¼–è¾‘è¿™äº›è„šæœ¬æˆ–åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰è„šæœ¬ã€‚

---

## ğŸ› ï¸ è„šæœ¬ API æ–‡æ¡£

ScriptShot ä½¿ç”¨ [Rhino](https://github.com/mozilla/rhino) JavaScript å¼•æ“ï¼Œæä¾›äº†ä¸°å¯Œçš„å†…ç½® APIã€‚

### å…¨å±€å˜é‡

| å˜é‡å | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `screenshotPath` | `string` | æœ€æ–°æˆªå›¾çš„æ–‡ä»¶è·¯å¾„ |

### å…¨å±€å‡½æ•°

```javascript
log(message)  // è¾“å‡ºæ—¥å¿—åˆ° engine.log
```

### img - å›¾åƒå¤„ç† API

```javascript
// åŠ è½½å›¾ç‰‡ä¿¡æ¯
var info = img.load(path);
// è¿”å›: { width, height, bytes, mime }

// æ—‹è½¬å›¾ç‰‡
img.rotate(path, degrees);

// è£å‰ªå›¾ç‰‡
img.cropCenter(path, width, height, outPath);
img.cropRelative(path, leftRatio, topRatio, rightRatio, bottomRatio, outPath);

// ç¼©æ”¾å›¾ç‰‡
img.resizeToMaxEdge(path, maxEdge, outPath);
img.resizeToFit(path, maxWidth, maxHeight, outPath);

// å‹ç¼©å›¾ç‰‡
img.compress(path, quality, outPath);

// æ·»åŠ æ°´å°
img.watermarkText(path, text, position, textSize, color, padding, outPath);
img.watermarkImage(path, watermarkPath, position, scale, padding, outPath);
// position: "top_left", "top_right", "bottom_left", "bottom_right", "center"

// ç»˜åˆ¶çŸ©å½¢
img.fillRect(path, left, top, right, bottom, color, outPath);
img.drawRect(path, left, top, right, bottom, color, strokeWidth, outPath);

// æ¨¡ç³ŠåŒºåŸŸ
img.blurRect(path, left, top, right, bottom, radius, outPath);

// æ·»åŠ è¾¹è·
img.pad(path, left, top, right, bottom, color, outPath);
img.padToAspectRatio(path, targetWidth, targetHeight, color, outPath);

// ç°åº¦åŒ–
img.toGrayscale(path, outPath);

// è·å–åŒºåŸŸå¹³å‡é¢œè‰²
var color = img.getAverageColor(path, left, top, right, bottom);

// è½¬ Base64
var base64 = img.toBase64(path);

// åˆ é™¤å›¾ç‰‡
img.delete(path);

// è·å–æœ€åè¾“å‡ºè·¯å¾„
var outputPath = img.getLastOutputPath();
```

### share - åˆ†äº« API

```javascript
share.image(imagePath);           // åˆ†äº«å›¾ç‰‡
share.text(text);                 // åˆ†äº«æ–‡æœ¬
share.imageWithText(path, text);  // åˆ†äº«å›¾ç‰‡å’Œæ–‡æœ¬
```

### shell - Shell å‘½ä»¤ API

```javascript
// æ‰§è¡Œæ™®é€š Shell å‘½ä»¤
var result = shell.exec(command);

// æ‰§è¡Œ Root å‘½ä»¤
var result = shell.sudo(command);

// result: { code, stdout, stderr }
```

### files - æ–‡ä»¶æ“ä½œ API

```javascript
files.read(path);                    // è¯»å–æ–‡ä»¶å†…å®¹
files.write(path, content);          // å†™å…¥æ–‡ä»¶
files.append(path, content);         // è¿½åŠ å†…å®¹
files.exists(path);                  // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
files.delete(path);                  // åˆ é™¤æ–‡ä»¶
files.copy(srcPath, destPath);       // å¤åˆ¶æ–‡ä»¶
files.move(srcPath, destPath);       // ç§»åŠ¨æ–‡ä»¶
files.list(dirPath);                 // åˆ—å‡ºç›®å½•å†…å®¹
```

### ui - äº¤äº’ API

```javascript
ui.toast(message);                   // æ˜¾ç¤º Toast
ui.alert(title, message);            // å¼¹å‡ºæç¤ºæ¡†
ui.confirm(title, message);          // å¼¹å‡ºç¡®è®¤æ¡†ï¼Œè¿”å› true/false
ui.prompt(title, hint, defaultVal);  // å¼¹å‡ºè¾“å…¥æ¡†ï¼Œè¿”å›è¾“å…¥å†…å®¹
```

### notification - é€šçŸ¥ API

```javascript
notification.show(title, message);   // æ˜¾ç¤ºé€šçŸ¥
```

---

## ğŸ“ è„šæœ¬ç¤ºä¾‹

### æ—‹è½¬æˆªå›¾ 180Â°

```javascript
if (screenshotPath) {
    img.rotate(screenshotPath, 180);
    log("æˆªå›¾å·²æ—‹è½¬ 180Â°");
}
```

### æ·»åŠ æ—¶é—´æ°´å°

```javascript
if (screenshotPath) {
    var now = new Date();
    var timestamp = now.toLocaleString();
    img.watermarkText(
        screenshotPath, 
        timestamp, 
        "bottom_right",  // ä½ç½®
        48,              // å­—ä½“å¤§å°
        "#FFFFFF",       // é¢œè‰²
        20,              // è¾¹è·
        null             // è¦†ç›–åŸå›¾
    );
    log("å·²æ·»åŠ æ—¶é—´æ°´å°: " + timestamp);
}
```

### å‹ç¼©å¹¶åˆ†äº«

```javascript
if (screenshotPath) {
    var compressedPath = screenshotPath.replace(".png", "_compressed.jpg");
    img.compress(screenshotPath, 70, compressedPath);
    share.image(compressedPath);
}
```

### éšç§æ¨¡ç³Š

```javascript
if (screenshotPath) {
    var info = img.load(screenshotPath);
    // æ¨¡ç³Šé¡¶éƒ¨çŠ¶æ€æ åŒºåŸŸ
    img.blurRect(screenshotPath, 0, 0, info.width, 100, 25, null);
    log("å·²æ¨¡ç³ŠçŠ¶æ€æ åŒºåŸŸ");
}
```

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
app/src/main/java/com/scriptshot/
â”œâ”€â”€ core/                           # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ permission/                 # æƒé™ç®¡ç†
â”‚   â”œâ”€â”€ preferences/                # åå¥½è®¾ç½®
â”‚   â”œâ”€â”€ root/                       # Root å·¥å…·
â”‚   â”œâ”€â”€ screenshot/                 # æˆªå±å®ç°
â”‚   â”œâ”€â”€ shortcut/                   # å¿«æ·æ–¹å¼
â”‚   â””â”€â”€ trigger/                    # è§¦å‘ç®¡é“
â”œâ”€â”€ script/                         # è„šæœ¬å¼•æ“
â”‚   â”œâ”€â”€ api/                        # è„šæœ¬ API
â”‚   â”‚   â”œâ”€â”€ FilesApi.java
â”‚   â”‚   â”œâ”€â”€ ImgApi.java
â”‚   â”‚   â”œâ”€â”€ NotificationApi.java
â”‚   â”‚   â”œâ”€â”€ ShareApi.java
â”‚   â”‚   â”œâ”€â”€ ShellApi.java
â”‚   â”‚   â””â”€â”€ UiApi.java
â”‚   â”œâ”€â”€ storage/                    # è„šæœ¬å­˜å‚¨
â”‚   â””â”€â”€ EngineManager.java          # Rhino å¼•æ“ç®¡ç†
â”œâ”€â”€ service/                        # åå°æœåŠ¡
â”‚   â”œâ”€â”€ ScreenshotAccessibilityService.java
â”‚   â”œâ”€â”€ ScriptShotTileService.java
â”‚   â””â”€â”€ ScriptShotTriggerService.java
â””â”€â”€ ui/                             # ç”¨æˆ·ç•Œé¢
    â”œâ”€â”€ ConfigActivity.java
    â”œâ”€â”€ ScriptManagerActivity.java
    â””â”€â”€ ...
```

---

## ğŸ”§ æ„å»ºé¡¹ç›®

### ç¯å¢ƒè¦æ±‚

- JDK 17+
- Android SDK (API 34)
- Gradle 8.7+

### æ„å»ºæ­¥éª¤

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/gao-gao-zai/ScriptShot.git
cd ScriptShot

# æ„å»º Debug APK
./gradlew assembleDebug

# æ„å»º Release APK
./gradlew assembleRelease
```

APK è¾“å‡ºä½ç½®ï¼š`app/build/outputs/apk/`

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE) å¼€æºã€‚

```
MIT License

Copyright (c) 2025 gao-gao-zai

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction...
```

---

## ğŸ™ è‡´è°¢

- [Mozilla Rhino](https://github.com/mozilla/rhino) - JavaScript å¼•æ“
- [Material Design](https://material.io/) - UI è®¾è®¡è§„èŒƒ

---

## ğŸ“® åé¦ˆä¸è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ [Issue](https://github.com/gao-gao-zai/ScriptShot/issues)
- æŸ¥çœ‹ [å®Œæ•´ä½¿ç”¨æ–‡æ¡£](UserGuide.md)

